<?xml version="1.0"?>
<launch>
  <!-- 
    Benchmark Launch File for Phase 3
    Runs RRTConnect performance evaluation with multiple random trials.
    
    Prerequisites: Gazebo and MoveIt must be running
      roslaunch franka_zed_gazebo moveit_gazebo_panda.launch gazebo_gui:=false
    
    Usage:
      roslaunch panda_grasp_planning benchmark.launch trials:=100
      
    After completion, analyze results:
      python3 analyze_results.py benchmark_results_*.csv
  -->

  <!-- Arguments -->
  <arg name="trials" default="100" doc="Number of random trials to run" />
  <arg name="output" default="test_results/benchmark_results.csv" doc="Output CSV filepath" />
  <arg name="home_interval" default="10" doc="Return to home every N trials" />
  <arg name="debug" default="false" doc="Enable debug mode" />

  <!-- Load planning parameters -->
  <rosparam command="load" file="$(find panda_grasp_planning)/config/planning_params.yaml" />

  <!-- Run benchmark node -->
  <node name="rrt_benchmark" 
        pkg="panda_grasp_planning" 
        type="benchmark_rrt.py" 
        output="screen"
        args="--trials $(arg trials) --output $(arg output) --home-interval $(arg home_interval)"
        respawn="false">
    <param name="debug" value="$(arg debug)" />
  </node>

  <!-- Optional: Monitor planning scene -->
  <node if="$(arg debug)"
        name="planning_scene_monitor"
        pkg="rostopic"
        type="rostopic"
        args="echo /move_group/display_planned_path"
        output="screen" />

</launch>
