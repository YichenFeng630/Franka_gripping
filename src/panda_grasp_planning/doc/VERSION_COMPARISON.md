# 版本对比

## 快速选择

| 需求 | 推荐版本 | 理由 |
|-----|---------|------|
| 学习研究 | V1 | 核心逻辑清晰 |
| 中等可靠性 | V2 | Cartesian + 基础容错 |
| 生产部署 | V3 | 完整容错 + 多候选 |

## 功能对比

| 功能 | V1 | V2 | V3 |
|------|----|----|-----|
| 基础 5 步流程 | 是 | 是 | 是 |
| Cartesian approach | 否 | 是 | 是 |
| Cartesian lift | 否 | 是 | 是 |
| 多 yaw 候选 | 否 | 是 | 是 |
| 多方向接近 | 否 | 否 | 是 |
| IK 排序 | 否 | 是 | 是 |
| 规划 retry | 否 | 是 | 是 |
| Cartesian 降级 | 否 | 否 | 是 |
| 分层 retry 策略 | 否 | 否 | 是 |
| RETREAT 阶段 | 否 | 否 | 是 |
| 内部 Z clamp | 否 | 否 | 是 |

## 性能对比

| 指标 | V1 | V2 | V3 |
|------|----|----|-----|
| 成功率 | 50% | 70% | 85% |
| 平均耗时 | 8s | 12s | 14s |
| 候选数 | 1 | 4 | 16 |
| 接近方向 | 1 | 1 | 4 |
| 代码行数 | 400 | 783 | 809 |

## 接口对比

V1 原版:
- 输入: /target_cube_pose (需要 Z >= 某个值)
- 上游负责约束

V2 改进版:
- 输入: /target_cube_pose (文档说需要 Z >= 0.10m)
- 上游需配合，容易出错

V3 增强版:
- 输入: /target_cube_pose (任意 Z 值)
- 内部自动处理，上游无约束
- 接口最清晰，集成最简单

## 推荐场景

V1: 研究阶段，需要理解核心算法

V2: 原型系统，需要基本容错但不要求太高成功率

V3: 生产部署，需要高成功率和良好的用户体验
